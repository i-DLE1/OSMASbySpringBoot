<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<header th:fragment="header">
  <link rel="stylesheet" href="/css/common/header.css">
  <script>
    function toggleDropdown(event) {
      // event.stopPropagation(); // 클릭 이벤트의 전파를 중지합니다.
      var dropdown = document.getElementById("dropdownContent");
      dropdown.classList.toggle("slide-open");
    }

    // 클릭 이벤트가 발생한 영역 밖을 클릭하면 슬라이드가 닫히도록 설정
    window.addEventListener("click", function (event) {
      var dropdown = document.getElementById("dropdownContent");
      var targetElement = event.target;

      if (!targetElement.closest(".gugu") && !targetElement.closest(".slide-content")) {
        dropdown.classList.remove("slide-open");
      }
    });

    //관리자 페이지 표시 기능
    function toggleMenu() {
      var menu = document.getElementById("adminPageContent");

      if (menu.style.display === "block") {
        menu.style.display = "none";
      } else {
        menu.style.display = "block";
      }
    }
  </script>

  <div class="User_container">
    <th:block sec:authorize="isAnonymous()">
      <button onclick="location.href='/member/login/login'">로그인</button>
      <button onclick="location.href='/member/signup/signUp'">회원가입</button>
    </th:block>
    <th:block sec:authorize="isAuthenticated()">
        <button sec:authentication="principal.nickname" class="id_button"></button>
        <button onclick="location.href='/member/logout'">로그아웃</button>
    </th:block>
    <th:block sec:authorize="hasRole('ADMIN')">
      <div class="adminPage">
      <button class="adminPageGo" onclick="toggleMenu()">관리자 페이지</button>
      <div class="adminPage-content" id="adminPageContent">
        <a onclick="location.href='admin/user_notice/notice_view/A'">공지사항</a>
        <a onclick="location.href='admin/adminCategory/fundingRanking'">현재 펀딩 순위</a>
        <a onclick="location.href='admin/sellerApproval/waitingAuthority'">판매자 권한 관리</a>
        <a onclick="location.href='admin/sellerApprovalForm/formMain'">판매자 권한 신청폼(추후 삭제 예정)</a>
        <a onclick="location.href='admin/itemApproval/waitingItem'">상품 승인 관리</a>
        <a onclick="location.href='admin/adminCategory/gettingProposals'">제안 받기</a>
      </div>
      </div>
    </th:block>
  </div>
  <div id="logo">
    <a style="cursor: pointer" onclick="location.href='/main'">
      <img src="/images/member/logo.png">
    </a>
  </div>
  <nav>
    <ul>
      <li class="category">
        <button class="gugu" onclick="toggleDropdown()">카테고리</button>
      </li>

      <div class="slide-content" id="dropdownContent">
        <div style="text-align: center;">
          <img src="/images/member/logo.png" width="150px" style="margin-top: 30px; margin-bottom: 30px;">
        </div>
        <a href="/saleList">전체 상품</a>
        <a href="#">인기 상품</a>
        <a href="#">빅 사이즈</a>
        <a href="#">스몰 사이즈</a>
        <a href="#">오늘 오픈</a>
        <a href="#">마감 임박</a>
        <a href="#">맞춤 의류</a>
      </div>

      <button class="gugu" style="color: black;"><a href="./todayOpen">오늘 오픈</a></button>
      <button class="gugu" style="color: black;"><a href="./hotItem">인기 상품</a></button>
      <button class="gugu" style="color: black;"><a href="./openExpect">오픈 예정</a></button>
      <button class="gugu" style="color: black;"><a onclick="location.href='/admin/user_notice/notice_view/E'">이벤트</a></button>
      <li class="search">
        <input type="text" placeholder="검색할 내용을 입력해주세요">
      </li>
    </ul>
  </nav>
</header>

</html>